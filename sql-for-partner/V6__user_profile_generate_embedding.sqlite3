-- Profile embeddings for AI-powered semantic matching
-- Stores embedding vectors as comma-separated string.
-- 'generateEmbedding' flags that this user should always have an embedding generated.

ALTER TABLE group_onboard ADD COLUMN previousMatches TEXT;

CREATE TABLE user_profile_embedding (
  issuerDid TEXT PRIMARY KEY,
  embeddingVector TEXT NOT NULL,
  isForEmptyString INTEGER NOT NULL,
  updatedAt DATETIME NOT NULL,
  generateEmbedding BOOLEAN DEFAULT 1,
  FOREIGN KEY (issuerDid) REFERENCES user_profile(issuerDid)
);
